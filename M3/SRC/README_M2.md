# Milestone 2: Retrieval Component

## Overview

This milestone implements the search/retrieval component for the search engine. The search engine supports boolean AND queries with tf-idf ranking.

## Files

- `search_engine.py` - Core search engine implementation
- `search.py` - Interactive console-based search interface
- `test_queries.py` - Script to test required queries and generate results
- `generate_m2_report.py` - Generates PDF report from query results

## Requirements

- Python 3.6+
- Dependencies from `../shared/requirements.txt`
- Index files in `../index/` directory (generated by M1)

## Usage

### Interactive Search

Run the interactive search interface:

```bash
cd DEVELOPER_OPTION
python3 search.py
```

Then enter queries at the prompt. Type 'quit' or 'exit' to stop.

### Test Required Queries

Test the search engine with the 4 required queries:

```bash
cd DEVELOPER_OPTION
python3 test_queries.py
```

This will:
1. Test all 4 required queries
2. Display results in the console
3. Save results to `query_results.json`

### Generate Report

After running test queries, generate the PDF report:

```bash
cd DEVELOPER_OPTION
python3 generate_m2_report.py
```

This creates `milestone2_report_developer.pdf` with:
- Top 5 URLs for each required query
- Query execution times
- Implementation details

## Required Test Queries

1. cristina lopes
2. machine learning
3. ACM
4. master of software engineering

## Implementation Details

### Boolean AND Queries

The search engine implements boolean AND queries:
- All query terms must be present in a document
- Uses set intersection of posting lists
- Only documents containing all terms are returned

### TF-IDF Ranking

Results are ranked using tf-idf scoring:
- Formula: `tf_idf = (1 + log(tf)) * log(N/df)`
- `tf`: term frequency in document
- `df`: document frequency (number of documents containing term)
- `N`: total number of documents

### Important Words

Words in bold, headings (h1, h2, h3), or titles receive a 1.5x boost in their tf-idf score.

### Query Processing

1. Query is tokenized (alphanumeric sequences)
2. Tokens are stemmed using Porter stemmer
3. Posting lists are retrieved for each term
4. Intersection of posting lists is computed (AND)
5. TF-IDF scores are calculated for matching documents
6. Results are sorted by score (descending)

## Performance

- Index is loaded into memory on first query for fast subsequent queries
- Document mappings are cached
- Query response time target: ≤ 300ms (for M3)

## Output Format

Results are returned as a list of tuples: `(url, score)`, sorted by score in descending order.

## Next Steps (M3)

For Milestone 3, the search engine will need to:
- Meet the ≤ 300ms response time requirement
- Not load entire index into memory (disk-based access)
- Implement additional ranking features
- Add web interface (optional, for extra credit)

